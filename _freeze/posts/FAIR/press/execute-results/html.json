{
  "hash": "3745b66054ea57f4f719ac26c18c59bd",
  "result": {
    "markdown": "---\ntitle: \"FAIR Bioinformatics\"\nsubtitle: \"Bioinformatic talks 14/12/2022\"\nauthor: \"Izar de Villasante\"\nformat:\n  revealjs: \n    embed-resources: true\n    slide-number: true\n    width: 1920\n    height: 1080\n    smaller: true\n\n    preview-links: auto\n    css: styles.css\nresources:\n  - fairprinciplespaper.pdf\n  - styles.css\n  - images/\nexecute: \n  cache: false\n---\n\n\n\n::: {.cell}\n<style type=\"text/css\">\n.vertical-th {\n  writing-mode: vertical-lr;\n  text-orientation: upright;\n}\n.fair-caps{\n  color: black;\n  font-size: 2em;\n  margin: 10px;\n  margin-top: 0px;\n  text-orientation: upright;\n  writing-mode: vertical-lr;\n  text-align: justify;\n \n  width: 200px;\n  height: 90px;\n}\n.fair-caps2{\n  color: black;\n  font-size: 3em;\n  margin: 10px;\n  margin-top: 0px;\n  text-orientation: sideways;\n  writing-mode: horizontal-tb;\n  text-align: justify;\n\n  width: 200px;\n  height: 90px;\n}\n\n</style>\n:::\n\n\n\n## Motivation {auto-animate=\"true\" auto-animate-easing=\"ease-in-out\"}\n\n\n::: {.r-fit-text .incremental}\n\n1.  Next generation notebooks\n\n    -   better integration of code plots and narrative\n\n2.  Portable workspace\n\n    -   platform independent working environment (cluster, local,\n        remote, OS)\n\n    -   Avoid involving it or admins in software installation on remote\n        cluster (HPC)\n\n3.  Community feedback\n\n    -   Good opportunity to share new discoveries about remote work\n        (both remote server & homebased work)\n\n    -   Good opportunity to hear about other approaches\n\n    -   Discussion with the bioinformatics community.\n\n    -   Inspiration for Bioinformatics Unit Workshops\n:::\n\n::: {.r-hstack }\n::: {.fair-caps data-id=\"F\" auto-animate-delay=\"0.1\" style=\"background: #ff0000;\"}\n:::\n\n::: {.fair-caps data-id=\"A\" auto-animate-delay=\"0.1\" style=\"background: #ffff00;\"}\n:::\n\n::: {.fair-caps data-id=\"I\" auto-animate-delay=\"0.2\" style=\"background: #008000;\"}\n:::\n\n::: {.fair-caps data-id=\"R\" auto-animate-delay=\"0.3\" style=\"background: skyblue;\"}\n:::\n:::\n\n##  {auto-animate=\"true\" auto-animate-easing=\"ease-in-out\" background-color=\"pink\"}\n\n::: {.r-stack style=\"font-family:Arial;font-size:1.75em; text-align: center;font-weight: bold;margin:0px;\"}\n::: {data-id=\"F\" style=\"background: #ff0000; width: 600px; height: 600px; border-radius: 1200px;\"}\n::: {style=\"height:70px;line-height: 70px; \"}\nF\n:::\n:::\n\n::: {data-id=\"A\" style=\"background: #ffff00; width: 450px; height: 450px; border-radius: 1200px;\"}\n::: {style=\"height:70px;line-height: 70px; \"}\nA\n:::\n:::\n\n::: {data-id=\"I\" style=\"background: #008000; width: 300px; height: 300px; border-radius: 1200px;\"}\n::: {style=\"height:70px;line-height: 70px; \"}\nI\n:::\n:::\n\n::: {data-id=\"R\" style=\"background: skyblue; width: 150px; height: 150px; border-radius: 1200px;\"}\n:::\n\n::: {data-id=\"bioinf\" style=\"width: 720px; height: 250px; border-radius: 20px;\"}\n::: {style=\"height:250px;line-height: 400px; \"}\n<img src=\"images/faiR_bioinformatics.svg\"/>\n:::\n:::\n:::\n\n<!-- ::: {data-id=\"E\" style=\"background: #0000ff; width: 375px; height: 50px; border-radius: 10px;\"} -->\n\n<!-- ::: -->\n\n<!-- ::: {data-id=\"S\" style=\"background: #4b0082; width: 375px; height: 50px; border-radius: 10px;\"} -->\n\n<!-- ::: -->\n\n<!-- ::: {data-id=\"T\" style=\"background: #ee82ee; width: 375px; height: 50px; border-radius: 10px;\"} -->\n\n<!-- ::: -->\n:::\n\n##  {auto-animate=\"true\" auto-animate-easing=\"ease-in-out\"}\n\n::: r-hstack\n::: {.fair-caps data-id=\"F\" auto-animate-delay=\"0\" style=\"background: #ff0000;\"}\nF\n:::\n\n::: {.fair-caps data-id=\"A\" auto-animate-delay=\"0.1\" style=\"background: #ffff00;\"}\nA\n:::\n\n::: {.fair-caps data-id=\"I\" auto-animate-delay=\"0.2\" style=\"background: #008000;\"}\nI\n:::\n\n::: {.fair-caps data-id=\"R\" auto-animate-delay=\"0.3\" style=\"background: skyblue;\"}\nR\n:::\n\n<br><br><br><br>\n:::\n\n<iframe class=\"stretch\" data-src=\"fairprinciplespaper.pdf\">\n\n</iframe>\n\n::: notes\nWe know what is bioinformatics but what is fair\n:::\n\n## FAIR PRINCIPLES {auto-animate=\"true\" auto-animate-easing=\"ease-in-out\"}\n\n::: columns\n::: {.column width=\"20%\"}\n::: {.r-hstack style=\"text-orientation: upright;writing-mode: vertical-lr;text-align:left;\"}\n::: {data-id=\"F\" auto-animate-delay=\"0\" style=\"text-align: left;   writing-mode: horizontal-tb;\"}\n[F]{style=\"color:black;font-size: 1.33em;background: #ff0000;\"}indable\n<br>\n:::\n\n::: {data-id=\"A\" auto-animate-delay=\"0.1\" style=\"writing-mode: horizontal-tb;\"}\n[A]{style=\"color:black;font-size: 1.33em;background: #ffff00;\"}ccessible\n<br>\n:::\n\n::: {data-id=\"I\" auto-animate-delay=\"0.2\" style=\"text-orientation: mixed;   writing-mode: horizontal-tb;\"}\n[I]{style=\"color:black;font-size: 1.33em;background: #008000;\"}nteroperable\n<br>\n:::\n\n::: {data-id=\"R\" auto-animate-delay=\"0.3\" style=\"text-orientation: sideways;   writing-mode: horizontal-tb;\"}\n[R]{style=\"color:black;font-size: 1.33em;background: skyblue;\"}eusable\n<br>\n:::\n:::\n:::\n\n::: {.column width=\"5%\"}\n:::\n\n::: {.column width=\"75%\"}\n::: {.r-hstack style=\"text-orientation: upright;writing-mode: vertical-lr;text-align:left;\"}\n::: {style=\"text-align: left;margin-top: 15px;   writing-mode: horizontal-tb;\"}\nEasy to find for both humans and computers. Globally unique & persistent\nid. <br>\n:::\n\n::: {data-id=\"A\" auto-animate-delay=\"0.1\" style=\"writing-mode: horizontal-tb;margin-top: 15px;text-align:left;\"}\nOpen as possible, closed as necessary. User authentication and\nauthorisation. <br>\n:::\n\n::: {data-id=\"I\" auto-animate-delay=\"0.2\" style=\"text-orientation: mixed;text-align:left;margin-top: 15px;   writing-mode: horizontal-tb;\"}\nCan be integrated with other apps & analysis <br>\n:::\n\n::: {data-id=\"R\" auto-animate-delay=\"0.3\" style=\"text-orientation: sideways;text-align:left;margin-top: 15px;   writing-mode: horizontal-tb;\"}\nDocumentation and settings, clear license. <br>\n:::\n:::\n:::\n:::\n\n::: {.fragment .fade-in}\n[\"Fair is everybody getting what they need. if you want it fair start by\nyourself\"]{style=\"color: black;font-size: 1em; writing-mode: horizontal-tb;\"}\n:::\n\n##  {background-image=\"images/faiR_toolset.png\" background-size=\"contain\" background-repeat=\"no-repeat\"}\n\n## So what is Quarto? {background-color=\"black\"}\n\n<br>\n\n. . .\n\n<br>\n\n[Quarto is the next-generation of RMarkdown.]{style=\"font-size: 100px;\"}\n\n. . .\n\n[For **everyone.**]{style=\"font-size: 300px;\"}\n\n## So what is Quarto?\n\n> Quarto is a command line interface (CLI) that renders plain text\n> formats (`.qmd`, `.rmd`, `.md`) OR mixed formats (`.ipynb`/Jupyter\n> notebook) into static PDF/Word/HTML reports, books, websites,\n> presentations and more\n\n```{}\n#| eval: false\n#| echo: true\n#| code-line-numbers: \"|1|4|10|14|15\"\nidevillasante$ quarto --help\n\n  Usage:   quarto\n  Version: 1.0.36\n\n  Description:\n    Quarto CLI\n\n  Options:\n    -h, --help     - Show this help.                            \n    -V, --version  - Show the version number for this program.  \n\n  Commands:\n    render          [input] [args...]   - Render input file(s) to various document types.            \n    preview         [file] [args...]    - Render and preview a document or website project.          \n    serve           [input]             - Serve a Shiny interactive document.                        \n    create-project  [dir]               - Create a project for rendering multiple documents          \n    convert         <input>             - Convert documents to alternate representations.            \n    pandoc          [args...]           - Run the version of Pandoc embedded within Quarto.          \n    run             [script] [args...]  - Run a TypeScript, R, Python, or Lua script.                \n    install         <type> [target]     - Installs an extension or global dependency.                \n    publish         [provider] [path]   - Publish a document or project. Available providers include:\n    check           [target]            - Verify correct functioning of Quarto installation.         \n    help            [command]           - Show this help or the help of a sub-command.    \n```\n\n## Quarto, more than *just* `knitr`\n\nRmarkdown document processing workflow... . . .\n\n![](IMG/rmd-knitr.png)\n\n## Quarto, more than *just* `knitr`\n\nJupyter notebooks workflow...\n\n![](IMG/jupyter-alone.png)\n\n## Quarto, more than *just* `knitr`\n\nQuarto notebooks combine dual engine ... Knitr\n\n![](IMG/qmd-knitr.png)\n\n## Quarto, more than *just* `knitr`\n\nQuarto notebooks combine dual engine ... or jupyter\n\n![](IMG/qmd-jupyter.png) <br>\n\n## Quarto, more internals\n\n-   `knitr` or `jupyter` evaluates R/Python/Julia code and returns a\n    `.md` file along with the evaluated code\n\n. . .\n\n-   Quarto applies Lua filters + CSS/LaTeX which is then evaluated\n    alongside the `.md` file by Pandoc and converted to a final ouput\n    format\n\n. . .\n\nHere is an example of a Lua filter that converts strong emphasis to\nsmall caps, from <https://pandoc.org/lua-filters.html>\n\n``` lua\nreturn {\n  {\n    Strong = function (elem)\n      return pandoc.SmallCaps(elem.c)\n    end,\n  }\n}\n```\n\n. . .\n\nLua filters written by R/Python/Julia developers should be\ninterchangeable between formats - not language specific!\n\n## Comfort of your own workspace\n\n::: r-stack\n![](https://quarto.org/docs/tools/images/rstudio-preview.png){.fragment\nwidth=\"1500\"\nfig-alt=\"A screenshot of a Quarto document rendered inside RStudio\"}\n\n![](https://quarto.org/docs/tools/images/jupyterlab-preview.png){.fragment\nwidth=\"1500\"\nfig-alt=\"A screenshot of a Quarto document rendered inside JupyterLab\"}\n\n![](https://quarto.org/docs/computations/images/python-vscode.png){.fragment\nwidth=\"1500\"\nfig-alt=\"A screenshot of a Quarto document rendered inside VSCode\"}\n:::\n\n##  {background-image=\"https://raw.githubusercontent.com/allisonhorst/stats-illustrations/master/rstats-artwork/rmarkdown_wizards.png\" background-size=\"cover\"}\n\n![](images/quarto.png){.absolute bottom=\"50\" left=\"575\" width=\"250\"}\n\n## \n\n[So what is Quarto?]{style=\"font-size: 100px;\"}\n\n> [QuartoÂ® is an open-source scientific and technical publishing system\n> built on Pandoc]{style=\"font-size:100px;\"}\n\n## So what is Quarto?\n\n> A Quarto document i.e. a `.qmd` is a plain text file, like a `.rmd`,\n> that can be rendered to many different formats\n\n![](https://quarto.org/docs/get-started/hello/images/rstudio-source-visual.png){width=\"1200px\"\nfig-align=\"center\"\nfig-alt=\"A screenshot of a Visual and Source Quarto document\"}\n\n## One install, \"Batteries included\"\n\n-   RMarkdown grew into a large ecosystem, with **varying syntax**.\n\n. . .\n\nQuarto comes **\"batteries included\"** straight out of the box\n\n-   HTML reports and websites\n-   PDF reports\n-   MS Office (Word, Powerpoint)\n-   Presentations (Powerpoint, Beamer, `revealjs`)\n-   Books\n\n. . .\n\n-   Any language, *exact* same approach and syntax\n\n## What to do with my existing `.Rmd` or `.ipynb`?\n\nFor some of you - nothing changes! Keep using RMarkdown and Jupyter.\n\n<br>\n\n. . .\n\nHowever, most existing `.rmd` or `.ipynb` can be rendered as-is via\nQuarto\n\n``` bash\nquarto render my-favorite.rmd --to html\n```\n\n. . .\n\n<br>\n\nSince Jupyter notebooks can either be treated as a linear document to be\nre-executed or an already evaluated document there are additional\noptions like: `--execute`\n\n``` bash\nquarto render my-favorite.ipynb --to html --execute\n```\n\n. . .\n\nQuarto comes out of the box with much better accessibility, better\ndefaults, more options, and a much more consistent syntax.\n\n## Rendering\n\n1.  Render in RStudio\n\n![](https://quarto.org/docs/tools/images/rstudio-render.png)\n\n. . .\n\n2.  System shell via `quarto render`\n\n\n::: {.cell}\n\n```{.bash .cell-code}\nquarto render document.qmd # defaults to html\nquarto render document.qmd --to pdf\nquarto render document.qmd --to docx\n```\n:::\n\n\n. . .\n\n3.  R console via `quarto` R package\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(quarto)\nquarto_render(\"document.qmd\") # defaults to html\nquarto_render(\"document.qmd\", output_format = \"pdf\")\n```\n:::\n\n\n<!-- ## Interactive plot -->\n\n<!-- ``` {.python code-preview=\"examples/executable-code-figure-size.qmd\"} -->\n\n<!-- alt.Chart(cars).mark_point().encode( -->\n\n<!--     x='Horsepower', -->\n\n<!--     y='Miles_per_Gallon', -->\n\n<!--     color='Origin', -->\n\n<!-- ).properties( -->\n\n<!--     width=700, -->\n\n<!--     height=300 -->\n\n<!-- ).interactive() -->\n\n<!-- ``` -->\n\n## Summary of Quarto \\> RMarkdown\n\n-   Easier to organize/structure document and document layout\n-   Features largely cross-format\n-   Better ability to integrate multiple languages in a PROJECT\n-   Evaluate native language (R in knitr, Python/Julia in Jupyter)\n-   HTML slides with `revealjs` are pandoc-compatible, so RStudio Visual\n    Editor works with them\n\n## ROCKER-project\n\n<!-- http://www2.stat.duke.edu/~cr173/Sta790_Sp19/slides/ (Lec03)-->\n\n::: r-fit-text\n{{< fa brands docker >}} + {{< fa brands r-project >}} = https://www.rocker-project.org/\n:::\n\n> The rocker project provides a collection of containers suited for\n> different needs. find a base image to extend or images with popular\n> software and optimized libraries pre-installed. Get the latest version\n> or a reproducibly fixed environment.\n\n::: columns\n::: {.column width=\"33%\"}\n![](imagesrocker_base.svg)\n:::\n\n::: {.column width=\"33%\"}\nr ![](images/rocker_versioned.png)\n:::\n:::\n\n## Rocker versioned {background-image=\"images/rocker_project.svg\"}\n\n## Custom rocker image\n\n::: {.r-fit-text .incremental}\n-   You can customize your rocker image using a Dockerfile\n\n-   Just like rocker images build one upon the other\n\n-   There are helper scripts provided by the rocker team with popular\n    installs\n\n-   You can add any tools that you can install with command line\n:::\n\n. . .\n\n![](images/rocker_images_versioned.svg)\n\n## Custom Dockerfile {auto-animate=\"true\"}\n\nhttps://github.com/rocker-org/rocker-versioned2.git\n\n``` r\nFROM rocker/rstudio:4.0.0\n...\n```\n\n## Custom Dockerfile {auto-animate=\"true\"}\n\nhttps://github.com/rocker-org/rocker-versioned2.git\n\n``` r\nFROM rocker/rstudio:4.0.0\n\n# Add tools\nRUN /rocker_scripts/install_rstudio.sh\nRUN /rocker_scripts/install_pandoc.sh\nRUN /rocker_scripts/install_quarto.sh\nRUN /rocker_scripts/install_python.sh\nRUN /rocker_scripts/install_shiny_server.sh\n...\n```\n\n## Custom Dockerfile {auto-animate=\"true\"}\n\nhttps://github.com/rocker-org/rocker-versioned2.git\n\n``` r\nFROM rocker/rstudio:4.0.0 \n\n# Custom versions\nENV DEBIAN_FRONTEND noninteractive\nENV S6_VERSION=v2.1.0.2\nENV RSTUDIO_VERSION=latest\nENV DEFAULT_USER=rstudio\nENV PANDOC_VERSION=default\nENV QUARTO_VERSION=default\n\n# Add tools\nRUN /rocker_scripts/install_rstudio.sh\nRUN /rocker_scripts/install_pandoc.sh\nRUN /rocker_scripts/install_quarto.sh\nRUN /rocker_scripts/install_python.sh\nRUN /rocker_scripts/install_shiny_server.sh\n...\n```\n\n## Custom Dockerfile {auto-animate=\"true\"}\n\nhttps://github.com/rocker-org/rocker-versioned2.git\n\n``` r\nFROM rocker/rstudio:4.0.0 \n\n# Custom versions\nENV DEBIAN_FRONTEND noninteractive\nENV S6_VERSION=v2.1.0.2\nENV RSTUDIO_VERSION=latest\nENV DEFAULT_USER=rstudio\nENV PANDOC_VERSION=default\nENV QUARTO_VERSION=default\n\n# Add tools\nRUN /rocker_scripts/install_rstudio.sh\nRUN /rocker_scripts/install_pandoc.sh\nRUN /rocker_scripts/install_quarto.sh\nRUN /rocker_scripts/install_python.sh\nRUN /rocker_scripts/install_shiny_server.sh\n\n# Run comands\nRUN quarto install extension jmbuhr/quarto-molstar --no-prompt\nRUN apt-get update && \\\n    apt-get upgrade -y && \\\n    apt-get install -y \\\n    python3-pip \\\n    build-essential libssl-dev libffi-dev python3-dev \\\n    ssh-client\n...\n```\n\n## Custom Dockerfile {auto-animate=\"true\"}\n\nhttps://github.com/rocker-org/rocker-versioned2.git\n\n``` r\nFROM rocker/rstudio:4.0.0 \n\n# Add metadata labels\nLABEL org.opencontainers.image.licenses=\"GPL-2.0-or-later\" \\\n      org.opencontainers.image.source=\"https://github.com/Izar-de-villasante/dockerfiles\" \\\n      org.opencontainers.image.vendor=\"IJC Bioinformatics Team\" \\\n      org.opencontainers.image.authors=\"Izar de Villasante <idevillasante@carrerasresearch.org>\" \\\n      org.opencontainers.image.description=\"Ready to use rstudio + quarto container to start your new projects. This image contains R(4.2) Python(3.8+) rstudio(v2.1.0.2) shiny Bioconductor and quarto (1.2+).\"\n\n# Custom versions\nENV DEBIAN_FRONTEND noninteractive\nENV S6_VERSION=v2.1.0.2\nENV RSTUDIO_VERSION=latest\nENV DEFAULT_USER=rstudio\nENV PANDOC_VERSION=default\nENV QUARTO_VERSION=default\n\n# Add tools\nRUN /rocker_scripts/install_rstudio.sh\nRUN /rocker_scripts/install_pandoc.sh\nRUN /rocker_scripts/install_quarto.sh\nRUN /rocker_scripts/install_python.sh\nRUN /rocker_scripts/install_shiny_server.sh\n\n# Run comands\nRUN quarto install extension jmbuhr/quarto-molstar --no-prompt\nRUN apt-get update && \\\n    apt-get upgrade -y && \\\n    apt-get install -y \\\n    python3-pip \\\n    build-essential libssl-dev libffi-dev python3-dev \\\n    ssh-client\n...\n```\n\n## rocker + rstudio\n\n``` shell\n$ docker pull rocker/rstudio\nUsing default tag: latest\nlatest: Pulling from rocker/rstudio\n54f7e8ac135a: Pull complete\n021dd68904f6: Pull complete\n8d3e964cf18d: Pull complete\n81bbbedbef33: Pull complete\nc7878d347b3f: Pull complete\na7aae3dbd958: Pull complete\nda950bb11a69: Pull complete\nDigest: sha256:b9e6acea945ca28ec14b3de9925372bdd6c5e3828a8575b34d4247f619b66dd5\nStatus: Downloaded newer image for rocker/rstudio:latest\n```\n\n. . .\n\n``` shell\n$ docker run -e PASSWORD=SECRET --rm -p 8787:8787 rocker/rstudio\n...\n```\n\n. . .\n\n::: {style=\"text-align: center;\"}\nhttps://localhost:8787\n:::\n\n## Rocker versioned {background-image=\"images/docker_command.png\"}\n\n## Github {.sequential}\n\n-   Repositories: store code\n-   Registry: store containers\n-   Actions: CI workflows\n\n<br>\n\n## Rocker versioned {background-image=\"images/faiR_workspace_1.png\"}\n\n## Rocker versioned {background-image=\"images/faiR_workspace_2.png\"}\n\n## Rocker versioned {background-image=\"images/faiR_workspace_renv_snapshots.png\"}\n\n## Github Actions\n\n##  {background-image=\"images/gh_actions.PNG\"}\n\n##  {background-image=\"images/gh_actions2.PNG\"}\n\n##  {background-image=\"images/gh_actions3.PNG\"}\n\n## Rocker versioned {background-image=\"images/faiR_workspace_CI.png\"}\n\n## The end\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-after-body": [
        "\n<script>\n  // htmlwidgets need to know to resize themselves when slides are shown/hidden.\n  // Fire the \"slideenter\" event (handled by htmlwidgets.js) when the current\n  // slide changes (different for each slide format).\n  (function () {\n    // dispatch for htmlwidgets\n    function fireSlideEnter() {\n      const event = window.document.createEvent(\"Event\");\n      event.initEvent(\"slideenter\", true, true);\n      window.document.dispatchEvent(event);\n    }\n\n    function fireSlideChanged(previousSlide, currentSlide) {\n      fireSlideEnter();\n\n      // dispatch for shiny\n      if (window.jQuery) {\n        if (previousSlide) {\n          window.jQuery(previousSlide).trigger(\"hidden\");\n        }\n        if (currentSlide) {\n          window.jQuery(currentSlide).trigger(\"shown\");\n        }\n      }\n    }\n\n    // hookup for slidy\n    if (window.w3c_slidy) {\n      window.w3c_slidy.add_observer(function (slide_num) {\n        // slide_num starts at position 1\n        fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);\n      });\n    }\n\n  })();\n</script>\n\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}